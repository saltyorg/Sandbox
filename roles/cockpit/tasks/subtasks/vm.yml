#########################################################################
# Title:         Sandbox: Cockpit | VM Tasks                            #
# Author(s):     CHAIR/Raneydazed                                       #
# URL:           https://github.com/saltyorg/Sandbox                    #
# --                                                                    #
#########################################################################
#                   GNU General Public License v3.0                     #
#########################################################################
---
- name: VM | Gather package facts
  ansible.builtin.package_facts:

- name: VM | Install necessary packages for Cockpit Machines
  ansible.builtin.package:
    name: 
      - cockpit-machines
      - qemu
      - qemu-kvm
      - libvirt-clients
      - libvirt-daemon-system
      - virtinst
      - bridge-utils
      - cracklib-runtime
      - qemu-utils
      - dnsmasq
    state: latest
    update_cache: true

- name: VM | Start default network in libvirt
  ansible.builtin.command:
    cmd: virsh net-start default
